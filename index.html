<!DOCTYPE html>
<html>
<head>
  <title>Vitamin A Campaign Dashboard</title>
  <style>
    /* UNICEF primary blue background */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #0099cc;
      color: #fff;
    }

    /* Fixed top navigation */
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      background-color: #006699;
      padding: 10px;
      z-index: 1000;
    }

    nav a {
      color: #fff;
      margin: 0 15px;
      text-decoration: none;
      font-weight: bold;
    }

    section {
      padding: 80px 20px 40px;
      background-color: #e6f7ff;
      color: #000;
    }

    h2 {
      color: #006699;
    }

    .heatmap {
      margin: 20px 0;
    }

    canvas {
      border: 1px solid #ccc;
      background-color: #fff;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 14px;
    }

    th, td {
      border: 1px solid #999;
      padding: 4px 8px;
      text-align: left;
    }

    .legend {
      margin-top: 10px;
    }

    .legend span {
      display: inline-block;
      width: 20px;
      height: 20px;
      margin-right: 5px;
    }

    .red { background-color: red; }
    .yellow { background-color: yellow; }
    .green { background-color: green; }
  </style>
</head>
<body>

  <nav>
    <a href="#about">About</a>
    <a href="#vitamin">Vitamin A</a>
    <a href="#deworming">Deworming</a>
    <a href="#muac">MUAC Screening</a>
  </nav>

  <section id="about">
    <h2>About the Campaign</h2>
    <p>This is an integrated Vitamin A, Deworming, and Mass MUAC screening campaign in South Sudan. It aims to improve child health outcomes through targeted interventions across all counties.</p>
  </section>

  <section id="vitamin">
    <h2>Vitamin A Coverage</h2>
    <p><strong>Overall Coverage:</strong> <span id="vitacoverageoverall"></span></p>
    <div class="heatmap">
      <canvas id="vitaminCanvas" width="800" height="400"></canvas>
    </div>
    <div class="legend">
      <span class="red"></span> &lt; 50% 
      <span class="yellow"></span> 50–79% 
      <span class="green"></span> ≥80%
    </div>
    <table id="vitaminTable">
      <thead>
        <tr><th>County</th><th>Coverage</th><th>State Coverage</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="deworming">
    <h2>Deworming Coverage</h2>
    <p><strong>Overall Coverage:</strong> <span id="dewormcoverageoverall"></span></p>
    <div class="heatmap">
      <canvas id="dewormCanvas" width="800" height="400"></canvas>
    </div>
    <div class="legend">
      <span class="red"></span> &lt; 50% 
      <span class="yellow"></span> 50–79% 
      <span class="green"></span> ≥80%
    </div>
    <table id="dewormTable">
      <thead>
        <tr><th>County</th><th>Coverage</th><th>State Coverage</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <section id="muac">
    <h2>MUAC Screening Coverage</h2>
    <p><strong>Overall Coverage:</strong> <span id="muaccoverageoverall"></span></p>
    <div class="heatmap">
      <canvas id="muacCanvas" width="800" height="400"></canvas>
    </div>
    <div class="legend">
      <span class="red"></span> &lt; 50% 
      <span class="yellow"></span> 50–79% 
      <span class="green"></span> ≥80%
    </div>
    <table id="muacTable">
      <thead>
        <tr><th>County</th><th>Coverage</th><th>State Coverage</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <script>
    // Sample data placeholders — replace with actual data from finalc_coverage.xlsx
    const vitaminData = [
      { county: "Juba", coverage: 85, state: 80 },
      { county: "Bor", coverage: 72, state: 75 },
      { county: "Wau", coverage: 45, state: 50 }
    ];

    const dewormData = [
      { county: "Juba", coverage: 90, state: 88 },
      { county: "Bor", coverage: 65, state: 70 },
      { county: "Wau", coverage: 40, state: 45 }
    ];

    const muacData = [
      { county: "Juba", coverage: 78, state: 80 },
      { county: "Bor", coverage: 55, state: 60 },
      { county: "Wau", coverage: 30, state: 35 }
    ];

    document.getElementById("vitacoverageoverall").textContent = "74%";
    document.getElementById("dewormcoverageoverall").textContent = "68%";
    document.getElementById("muaccoverageoverall").textContent = "58%";

    function renderTable(data, tableId) {
      const tbody = document.querySelector(`#${tableId} tbody`);
      data.forEach(row => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${row.county}</td><td>${row.coverage}%</td><td>${row.state}%</td>`;
        tbody.appendChild(tr);
      });
    }

    function renderHeatmap(data, canvasId) {
      const canvas = document.getElementById(canvasId);
      const ctx = canvas.getContext("2d");
      const barWidth = canvas.width / data.length;
      data.forEach((row, i) => {
        let color = "red";
        if (row.coverage >= 80) color = "green";
        else if (row.coverage >= 50) color = "yellow";
        ctx.fillStyle = color;
        ctx.fillRect(i * barWidth, canvas.height - row.coverage * 3, barWidth - 2, row.coverage * 3);
        ctx.fillStyle = "#000";
        ctx.fillText(row.county, i * barWidth + 5, canvas.height - 5);
      });
    }

    renderTable(vitaminData, "vitaminTable");
    renderTable(dewormData, "dewormTable");
    renderTable(muacData, "muacTable");

    renderHeatmap(vitaminData, "vitaminCanvas");
    renderHeatmap(dewormData, "dewormCanvas");
    renderHeatmap(muacData, "muacCanvas");
  </script>

</body>
</html>
